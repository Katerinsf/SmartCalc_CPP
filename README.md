# SmartCalc v2.0

Реализация SmartCalc.

## Contents
1. [Introduction](#introduction) \
   1.1. [Паттерн MVC](#паттерн-mvc) \
   1.2. [Алгоритм Дейкстры](#алгоритм-дейкстры)

## Introduction

В данном проекте реализована расширенная версия обычного калькулятора. Помимо базовых арифметических операций калькулятор может вычислять арифметические выражения с учетом приоритетов, а так же некоторые математические функции (синус, косинус, логарифм и т.д.). Кроме того калькулятор поддерживает использование переменной *x* и построение графика соответствующей функции. 

- Программа разработана в парадигме ООП на языке C++ стандарта C++17.
- *Программа реализована с использованием паттерна MVC и алгоритма Дейкстры.*
- Код программы находиться в папке src 
- Сборка программы настроена с помощью Makefile со стандартным набором целей для GNU-программ:
  - all - быстрая сборка проекта,
  - install - установка приложения (для MacOS)
  - uninstall - удаление приложения,
  - tests - сборка тестов,
  - dvi - открытие документации для библиотеки классов, осуществляющей вычисления (модель),
  - dist - архивация проекта,
  - clean - удаление файлов сборки.

#### Логика польской нотации написана на языке С++
#### В качестве графической библиотеки использовался фреймворк QT 6 на языке С++
#### Для быстрой сборки проекта достаточно использовать команду: `make install`
#### Программа тестировалась на MacOS<br/><br/>

### Паттерн MVC

Паттерн MVC (Model-View-Controller, Модель-Представление-Контроллер) представляет из себя схему разделения модулей приложения на три отдельных макрокомпонента: модель, содержащую в себе бизнес-логику, представление - форму пользовательского интерфейса для осуществления взаимодействия с программой и контроллер, осуществляющий модификацию модели по действию пользователя.

Модель хранит и осуществляет доступ к основным данным, производит по запросам операции, то есть отвечает за все алгоритмы и процессы обработки информации. Данные модели, изменяясь под действием контроллера, влияют на отображение информации на представлении пользовательского интерфейса. В качестве модели в данной программе выступает библиотека классов, осуществляющая вычисления калькулятора. 

Контроллер - тонкий макрокомпонент, который осуществляет модификацию модели. Через него формируются запросы на изменение модели. Контроллер выполняет функцию связующего элемента между интерфейсом и моделью. Это позволяет полностью инкапсулировать модель от отображения. Таким обазом, взаимодействуя с интерфейсом, пользователь вызывает методы контроллера, которые модифицируют модель.

К представлению относится весь код, связанный с интерфейсом программы. В коде идеального интерфейса не должно быть никакой бизнес-логики. Он только представляет форму для взаимодействия с пользователем.

![](misc/images/MVC-Process.png)


### Алгоритм Дейкстры

Алгоритм Дейкстры используется для преобразования выражений из инфиксной формы в обратную польскую нотацию. 

Данный алгоритм основан на стеке. В преобразовании участвуют две текстовых переменных: входная и выходная строки. В процессе преобразования используется стек, хранящий ещё не добавленные к выходной строке операции.

#### Реализация алгоритма

Пока в исходной строке есть необработанные лексемы, считываем очередную:

Если лексема:
- Число - добавляем в строку вывода.
- Функция или открывающая скобка - помещаем в стек.
- Разделитель аргументов функции (например, запятая):         
    - Перекладываем операторы из стека в выходную очередь пока лексемой на вершине стека не станет открывающая скобка. Если в стеке не окажется открывающей скобки - в выражении допущена ошибка.
- Оператор (O1):
    - Пока присутствует на вершине стека лексема-оператор (O2) чей приоритет выше приоритета O1, либо при равенстве приоритетов O1 является левоассоциативным:
        - Перекладываем O2 из стека в выходную очередь.
    - Помещаем O1 в стек.
- Закрывающая скобка:
    - Пока лексема на вершине стека не станет открывающей скобкой, перекладываем лексемы-операторы из стека в выходную очередь.
    - Удаляем из стека открывающую скобку.
    - Если лексема на вершине стека — функция, перекладываем её в выходную очередь.
    - Если стек закончился до того, как была встречена открывающая скобка - в выражении содержится ошибка.

Если во входной строке больше не осталось лексем:
- Пока есть операторы в стеке:
    - Если на вершине стека скобка - в выражении допущена ошибка.
    - Перекладываем оператор из стека в выходную очередь.
